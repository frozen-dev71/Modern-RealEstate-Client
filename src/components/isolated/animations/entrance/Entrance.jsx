import styled from "styled-components";
import { motion } from "framer-motion";
import { respondTo } from "../../../../styles/helpers";
import { heightValue } from "../../../../utils/utilities";
import { useEntranceContext } from "../../../../context/entranceContext";
import { useWindowDimensions } from "../../../../hooks/useWindowDimensions";
import {
  StyledFixedWrapper,
  StyledBlockWrapper,
  StyledBlock,
} from "../../../../styles/reusable/animations";
import { blocksWrapperAnimation, blockAnimation } from "./animations";

const Entrance = () => {
  const { width } = useWindowDimensions();
  const { setIsEntranceActive } = useEntranceContext();
  const tabletBreakpoint = 768;

  const pathAnimation = {
    fromPath: () => ({
      pathLength: 0,
    }),
    toPath: () => ({
      pathLength: 1,
      fill: ["rgba(255, 255, 255, 0)", "rgba(255, 255, 255, 0)", "#ffff"],
      transition: {
        duration: 3.5,
        times: [0.2, 0.5, 0.8, 1],
        delay: 0.4,
        type: "tween",
        ease: "easeIn",
      },
    }),
    exit: () => ({
      opacity: [1, 0.8, 0.5, 0],
      x: width <= tabletBreakpoint ? -25 : -50,
      transition: {
        duration: 0.3,
      },
    }),
  };

  return (
    <StyledFixedWrapper center className="moveElementForward-100">
      <StyledBlockWrapper
        exit="exit"
        variants={blocksWrapperAnimation}
        key="blocks"
      >
        <StyledBlock variants={blockAnimation} value={0} right />
        <StyledBlock variants={blockAnimation} value={heightValue} right />
        <StyledBlock variants={blockAnimation} value={heightValue * 2} right />
      </StyledBlockWrapper>

      {/* Logo Entry */}
      <StyledSvg
        width="357"
        height="69"
        viewBox="0 0 358 69"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        exit={pathAnimation.exit}
        key="svg"
      >
        <motion.path
          initial={pathAnimation.fromPath}
          animate={pathAnimation.toPath}
          onAnimationComplete={() => setIsEntranceActive(false)}
          fill="none"
          stroke="#f1f1f1"
          stroke-width="1"
          d="M44.1009 1.568C44.4209 1.056 44.8689 0.799995 45.4449 0.799995H54.2769C54.5969 0.799995 54.8529 0.927996 55.0449 1.184C55.3009 1.376 55.4289 1.632 55.4289 1.952V66.848C55.4289 67.168 55.3009 67.456 55.0449 67.712C54.8529 67.904 54.5969 68 54.2769 68H45.4449C45.1249 68 44.8369 67.904 44.5809 67.712C44.3889 67.456 44.2929 67.168 44.2929 66.848V21.056C44.2929 20.864 44.1969 20.736 44.0049 20.672C43.8769 20.608 43.7809 20.672 43.7169 20.864L31.7169 39.296C31.3969 39.808 30.9489 40.064 30.3729 40.064H25.9569C25.3809 40.064 24.9329 39.808 24.6129 39.296L12.5169 20.96C12.4529 20.768 12.3249 20.704 12.1329 20.768C12.0049 20.832 11.9409 20.96 11.9409 21.152V66.848C11.9409 67.168 11.8129 67.456 11.5569 67.712C11.3649 67.904 11.1089 68 10.7889 68H1.95688C1.63688 68 1.34888 67.904 1.09288 67.712C0.900876 67.456 0.804876 67.168 0.804876 66.848V1.952C0.804876 1.632 0.900876 1.376 1.09288 1.184C1.34888 0.927996 1.63688 0.799995 1.95688 0.799995H10.7889C11.3649 0.799995 11.8129 1.056 12.1329 1.568L27.7809 25.28C27.9089 25.408 28.0369 25.472 28.1649 25.472C28.2929 25.472 28.3889 25.408 28.4529 25.28L44.1009 1.568ZM89.2059 68.768C84.1499 68.768 79.7979 67.488 76.1499 64.928C72.5659 62.368 70.0379 58.816 68.5659 54.272C67.4779 50.816 66.9339 47.168 66.9339 43.328C66.9339 39.232 67.4459 35.584 68.4699 32.384C69.9419 27.904 72.5019 24.416 76.1499 21.92C79.7979 19.424 84.1819 18.176 89.3019 18.176C94.1659 18.176 98.3579 19.424 101.878 21.92C105.462 24.416 107.99 27.872 109.462 32.288C110.614 35.36 111.19 39.008 111.19 43.232C111.19 47.264 110.646 50.912 109.558 54.176C108.086 58.72 105.558 62.304 101.974 64.928C98.3899 67.488 94.1339 68.768 89.2059 68.768ZM89.2059 59.168C91.5739 59.168 93.5899 58.496 95.2539 57.152C96.9819 55.808 98.2299 53.92 98.9979 51.488C99.6379 49.376 99.9579 46.688 99.9579 43.424C99.9579 39.968 99.6379 37.28 98.9979 35.36C98.2939 32.928 97.0779 31.072 95.3499 29.792C93.6219 28.448 91.5099 27.776 89.0139 27.776C86.6459 27.776 84.5979 28.448 82.8699 29.792C81.1419 31.072 79.8939 32.928 79.1259 35.36C78.4859 37.6 78.1659 40.288 78.1659 43.424C78.1659 46.56 78.4859 49.248 79.1259 51.488C79.8299 53.92 81.0459 55.808 82.7739 57.152C84.5659 58.496 86.7099 59.168 89.2059 59.168ZM152.15 1.952C152.15 1.632 152.246 1.376 152.438 1.184C152.694 0.927996 152.982 0.799995 153.302 0.799995H162.134C162.454 0.799995 162.71 0.927996 162.902 1.184C163.158 1.376 163.286 1.632 163.286 1.952V66.848C163.286 67.168 163.158 67.456 162.902 67.712C162.71 67.904 162.454 68 162.134 68H153.302C152.982 68 152.694 67.904 152.438 67.712C152.246 67.456 152.15 67.168 152.15 66.848V63.968C152.15 63.776 152.086 63.648 151.958 63.584C151.83 63.52 151.702 63.584 151.574 63.776C148.758 67.104 145.078 68.768 140.534 68.768C135.99 68.768 132.15 67.584 129.014 65.216C125.878 62.848 123.606 59.552 122.198 55.328C121.046 51.744 120.47 47.744 120.47 43.328C120.47 38.784 121.014 34.88 122.102 31.616C123.51 27.392 125.782 24.096 128.918 21.728C132.054 19.36 135.99 18.176 140.726 18.176C145.142 18.176 148.758 19.776 151.574 22.976C151.702 23.104 151.83 23.168 151.958 23.168C152.086 23.104 152.15 22.976 152.15 22.784V1.952ZM149.846 54.56C151.318 51.936 152.054 48.224 152.054 43.424C152.054 38.432 151.254 34.624 149.654 32C147.926 29.184 145.494 27.776 142.358 27.776C139.094 27.776 136.534 29.12 134.678 31.808C132.758 34.624 131.798 38.528 131.798 43.52C131.798 48 132.566 51.68 134.102 54.56C135.894 57.632 138.614 59.168 142.262 59.168C145.526 59.168 148.054 57.632 149.846 54.56ZM216.719 37.952C216.975 39.552 217.103 41.344 217.103 43.328L217.007 46.304C217.007 47.072 216.623 47.456 215.855 47.456H185.807C185.487 47.456 185.327 47.616 185.327 47.936C185.519 50.048 185.807 51.488 186.191 52.256C187.727 56.864 191.471 59.2 197.423 59.264C201.775 59.264 205.231 57.472 207.791 53.888C208.047 53.504 208.367 53.312 208.751 53.312C209.007 53.312 209.231 53.408 209.423 53.6L215.375 58.496C215.951 58.944 216.047 59.456 215.663 60.032C213.679 62.848 211.023 65.024 207.695 66.56C204.431 68.096 200.783 68.864 196.751 68.864C191.759 68.864 187.503 67.744 183.983 65.504C180.527 63.264 177.999 60.128 176.399 56.096C174.927 52.64 174.191 47.84 174.191 41.696C174.191 37.984 174.575 34.976 175.343 32.672C176.623 28.192 179.023 24.672 182.543 22.112C186.127 19.488 190.415 18.176 195.407 18.176C208.015 18.176 215.119 24.768 216.719 37.952ZM195.407 27.776C193.039 27.776 191.055 28.384 189.455 29.6C187.919 30.752 186.831 32.384 186.191 34.496C185.807 35.584 185.551 36.992 185.423 38.72C185.295 39.04 185.423 39.2 185.807 39.2H205.295C205.615 39.2 205.775 39.04 205.775 38.72C205.647 37.12 205.455 35.904 205.199 35.072C204.623 32.768 203.471 30.976 201.743 29.696C200.079 28.416 197.967 27.776 195.407 27.776ZM250.128 18.368C252.176 18.368 253.968 18.784 255.504 19.616C256.016 19.872 256.208 20.352 256.08 21.056L254.448 29.696C254.384 30.464 253.936 30.688 253.104 30.368C252.144 30.048 251.024 29.888 249.744 29.888C248.912 29.888 248.272 29.92 247.824 29.984C245.136 30.112 242.896 31.072 241.104 32.864C239.312 34.592 238.416 36.864 238.416 39.68V66.848C238.416 67.168 238.288 67.456 238.032 67.712C237.84 67.904 237.584 68 237.264 68H228.432C228.112 68 227.824 67.904 227.568 67.712C227.376 67.456 227.28 67.168 227.28 66.848V20.096C227.28 19.776 227.376 19.52 227.568 19.328C227.824 19.072 228.112 18.944 228.432 18.944H237.264C237.584 18.944 237.84 19.072 238.032 19.328C238.288 19.52 238.416 19.776 238.416 20.096V24.416C238.416 24.672 238.448 24.832 238.512 24.896C238.64 24.896 238.768 24.8 238.896 24.608C241.584 20.448 245.328 18.368 250.128 18.368ZM286.894 18.176C292.078 18.176 296.206 19.712 299.278 22.784C302.414 25.856 303.982 30.048 303.982 35.36V66.848C303.982 67.168 303.854 67.456 303.598 67.712C303.406 67.904 303.15 68 302.83 68H293.998C293.678 68 293.39 67.904 293.134 67.712C292.942 67.456 292.846 67.168 292.846 66.848V37.664C292.846 34.72 292.014 32.352 290.35 30.56C288.686 28.704 286.478 27.776 283.726 27.776C280.974 27.776 278.734 28.672 277.006 30.464C275.342 32.256 274.51 34.624 274.51 37.568V66.848C274.51 67.168 274.382 67.456 274.126 67.712C273.934 67.904 273.678 68 273.358 68H264.526C264.206 68 263.918 67.904 263.662 67.712C263.47 67.456 263.374 67.168 263.374 66.848V20.096C263.374 19.776 263.47 19.52 263.662 19.328C263.918 19.072 264.206 18.944 264.526 18.944H273.358C273.678 18.944 273.934 19.072 274.126 19.328C274.382 19.52 274.51 19.776 274.51 20.096V23.168C274.51 23.36 274.574 23.488 274.702 23.552C274.83 23.616 274.926 23.552 274.99 23.36C277.614 19.904 281.582 18.176 286.894 18.176ZM356.594 37.952C356.85 39.552 356.978 41.344 356.978 43.328L356.882 46.304C356.882 47.072 356.498 47.456 355.73 47.456H325.682C325.362 47.456 325.202 47.616 325.202 47.936C325.394 50.048 325.682 51.488 326.066 52.256C327.602 56.864 331.346 59.2 337.298 59.264C341.65 59.264 345.106 57.472 347.666 53.888C347.922 53.504 348.242 53.312 348.626 53.312C348.882 53.312 349.106 53.408 349.298 53.6L355.25 58.496C355.826 58.944 355.922 59.456 355.538 60.032C353.554 62.848 350.898 65.024 347.57 66.56C344.306 68.096 340.658 68.864 336.626 68.864C331.634 68.864 327.378 67.744 323.858 65.504C320.402 63.264 317.874 60.128 316.274 56.096C314.802 52.64 314.066 47.84 314.066 41.696C314.066 37.984 314.45 34.976 315.218 32.672C316.498 28.192 318.898 24.672 322.418 22.112C326.002 19.488 330.29 18.176 335.282 18.176C347.89 18.176 354.994 24.768 356.594 37.952ZM335.282 27.776C332.914 27.776 330.93 28.384 329.33 29.6C327.794 30.752 326.706 32.384 326.066 34.496C325.682 35.584 325.426 36.992 325.298 38.72C325.17 39.04 325.298 39.2 325.682 39.2H345.17C345.49 39.2 345.65 39.04 345.65 38.72C345.522 37.12 345.33 35.904 345.074 35.072C344.498 32.768 343.346 30.976 341.618 29.696C339.954 28.416 337.842 27.776 335.282 27.776Z"
        />
      </StyledSvg>
    </StyledFixedWrapper>
  );
};

// Styles
const StyledSvg = styled(motion.svg)`
  width: 15.625rem; // 450px;
  position: relative;
  z-index: 50;

  ${respondTo.md`
      width: 28.12rem; // 450px
  `}
`;

export default Entrance;
